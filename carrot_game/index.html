<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Carrot Game</title>
	<link rel="stylesheet" href="./resources/css/main.css">
	<script src="./resources/js/main.js" defer></script>
	<script src="https://kit.fontawesome.com/01449b9132.js" crossorigin="anonymous"></script>
</head>
<body>
	<section id="container">
		<section class="controller">
			<button type="button" class="btn play"><i class="fas fa-play"></i></button>
			<button type="button" class="btn pause"><i class="fas fa-pause"></i></button>
			<button type="button" class="btn reset"><i class="fas fa-redo-alt"></i></button>
			<div class="count-time" title="남은시간">
				<span>00:<em class="count"></em></span>
			</div>
			<div class="score" title="점수"></div>
		</section>
		<section class="play-ground"></section>
	</section>
<script>
let startNum = 10;
let score = 0;
let countDownInterval;
const startButton = document.querySelector('.btn.play');
const pauseButton = document.querySelector('.btn.pause');
const resetButton = document.querySelector('.btn.reset');
window.addEventListener('load', () => {
	initGame();
    startButton.addEventListener('click', () => {
        pauseButton.classList.remove('active');
        startButton.classList.add('active');
        startGame();
        console.log(startNum)
    });
    pauseButton.addEventListener('click', () => {
        startButton.classList.remove('active');
        pauseButton.classList.add('active');
        stopCountDown();
        console.log(startNum)
    });
});

// game 초기화
function initGame(){
	createTargets(startNum);
    drawTime(startNum);
    drawScore(score);
}
function startGame(){
    countDown(startNum);
}






// count time
function drawTime(startNum){
    startNum < 10 ? startNum = '0' + startNum : startNum;
    const countBox = document.querySelector('.count');
    countBox.innerHTML = startNum;
}
function countDown(startNum){
    countDownInterval = setInterval(() => {
        if(startNum < 1){
            stopCountDown();
            console.log(startNum)
        }else{
            startNum -= 1;
            console.log(startNum)
            drawTime(startNum);
        }
    }, 1000);
}
function stopCountDown(){
    clearInterval(countDownInterval);
}

///////////////////////////////////////////////////////////////////////////////////////////////

// Score
function drawScore(score){
    const scoreBox = document.querySelector('.score');
    scoreBox.innerHTML = score;
}
function scoreUp(score){
    score += 1;
    drawScore(score);
    return score;
}

///////////////////////////////////////////////////////////////////////////////////////////////

// Targets 생성 
function createTargets(startNum){
	const playGround = document.querySelector('.play-ground');
	for(let i = 0; i < startNum; i++){
		let Reborn = new CreateTarget('reborn');
		let Kcar = new CreateTarget('kcar');
		let Encar = new CreateTarget('encar');
		let Chachacha = new CreateTarget('chachacha');
		let Sellcar = new CreateTarget('sellcar');
		playGround.appendChild(Reborn.el);
		playGround.appendChild(Kcar.el);
		playGround.appendChild(Encar.el);
		playGround.appendChild(Chachacha.el);
		playGround.appendChild(Sellcar.el);
	}
}
class CreateTarget {
	constructor(serviceName){
		this.serviceName = serviceName;
		this.leftPosition = this.getRandomNum(0, 95);
		this.topPosition = this.getRandomNum(0, 85);
	}
	get el(){
		return this.createEl();
	}
	createEl(){
		const el = document.createElement('div');
		el.setAttribute('class', `target ${this.serviceName}`);
		el.setAttribute('style', `left:${this.leftPosition}%; top:${this.topPosition}%`);
		const img = `<img src="./resources/img/img_${this.serviceName}.png" alt="">`;
		el.innerHTML = img;

		return el;
	}
	getRandomNum(min, max){
		return Math.floor(Math.random() * (max -min) + min);
	}
}


</script>
</body>
</html>